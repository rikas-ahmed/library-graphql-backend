{"version":3,"file":"MutationPayloadQueryPlugin.js","names":["MutationPayloadQueryPlugin","builder","hook","fields","build","context","$$isQuery","extend","getTypeByName","inflection","scope","isMutationPayload","Self","Query","builtin","query","description","wrapDescription","type","resolve","name","exports","default"],"sources":["../../src/plugins/MutationPayloadQueryPlugin.js"],"sourcesContent":["// @flow\nimport type { Plugin, Build } from \"../SchemaBuilder\";\nimport type { BuildExtensionQuery } from \"./QueryPlugin\";\n\nexport default (function MutationPayloadQueryPlugin(builder) {\n  builder.hook(\n    \"GraphQLObjectType:fields\",\n    (\n      fields: {},\n      build: {| ...Build, ...BuildExtensionQuery |},\n      context\n    ): {} => {\n      const { $$isQuery, extend, getTypeByName, inflection } = build;\n      const {\n        scope: { isMutationPayload },\n        Self,\n      } = context;\n      if (!isMutationPayload) {\n        return fields;\n      }\n      const Query = getTypeByName(inflection.builtin(\"Query\"));\n      return extend(\n        fields,\n        {\n          query: {\n            description: build.wrapDescription(\n              \"Our root query field type. Allows us to run any query from our mutation payload.\",\n              \"field\"\n            ),\n            type: Query,\n            resolve() {\n              return $$isQuery;\n            },\n          },\n        },\n        `Adding 'query' field to mutation payload ${Self.name}`\n      );\n    },\n    [\"MutationPayloadQuery\"]\n  );\n}: Plugin);\n"],"mappings":";;;;;;IAIyBA,0BAA0B,GAAnC,SAASA,0BAA0BA,CAACC,OAAO,EAAE;EAC3DA,OAAO,CAACC,IAAI,CACV,0BAA0B,EAC1B,CACEC,MAAU,EACVC,KAA6C,EAC7CC,OAAO,KACA;IACP,MAAM;MAAEC,SAAS;MAAEC,MAAM;MAAEC,aAAa;MAAEC;IAAW,CAAC,GAAGL,KAAK;IAC9D,MAAM;MACJM,KAAK,EAAE;QAAEC;MAAkB,CAAC;MAC5BC;IACF,CAAC,GAAGP,OAAO;IACX,IAAI,CAACM,iBAAiB,EAAE;MACtB,OAAOR,MAAM;IACf;IACA,MAAMU,KAAK,GAAGL,aAAa,CAACC,UAAU,CAACK,OAAO,CAAC,OAAO,CAAC,CAAC;IACxD,OAAOP,MAAM,CACXJ,MAAM,EACN;MACEY,KAAK,EAAE;QACLC,WAAW,EAAEZ,KAAK,CAACa,eAAe,CAChC,kFAAkF,EAClF,OACF,CAAC;QACDC,IAAI,EAAEL,KAAK;QACXM,OAAOA,CAAA,EAAG;UACR,OAAOb,SAAS;QAClB;MACF;IACF,CAAC,EACA,4CAA2CM,IAAI,CAACQ,IAAK,EACxD,CAAC;EACH,CAAC,EACD,CAAC,sBAAsB,CACzB,CAAC;AACH,CAAC;AAAAC,OAAA,CAAAC,OAAA,GAAAtB,0BAAA"}