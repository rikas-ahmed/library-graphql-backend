{"version":3,"file":"MutationPlugin.js","names":["isValidMutation","Mutation","Object","keys","getFields","length","e","MutationPlugin","builder","hook","schema","build","newWithHooks","extend","graphql","GraphQLObjectType","inflection","name","builtin","description","wrapDescription","__origin","isRootMutation","mutation","exports","default"],"sources":["../../src/plugins/MutationPlugin.js"],"sourcesContent":["// @flow\nimport type { Plugin } from \"../SchemaBuilder\";\n\nfunction isValidMutation(Mutation) {\n  try {\n    if (!Mutation) {\n      return false;\n    }\n    if (Object.keys(Mutation.getFields()).length === 0) {\n      return false;\n    }\n  } catch (e) {\n    return false;\n  }\n  return true;\n}\n\nexport default (async function MutationPlugin(builder) {\n  builder.hook(\n    \"GraphQLSchema\",\n    (schema: {}, build) => {\n      const {\n        newWithHooks,\n        extend,\n        graphql: { GraphQLObjectType },\n        inflection,\n      } = build;\n      const Mutation = newWithHooks(\n        GraphQLObjectType,\n        {\n          name: inflection.builtin(\"Mutation\"),\n          description: build.wrapDescription(\n            \"The root mutation type which contains root level fields which mutate data.\",\n            \"type\"\n          ),\n        },\n        {\n          __origin: `graphile-build built-in (root mutation type)`,\n          isRootMutation: true,\n        },\n        true\n      );\n      if (isValidMutation(Mutation)) {\n        return extend(\n          schema,\n          {\n            mutation: Mutation,\n          },\n          \"Adding mutation type to schema\"\n        );\n      } else {\n        return schema;\n      }\n    },\n    [\"Mutation\"],\n    [],\n    [\"Query\"]\n  );\n}: Plugin);\n"],"mappings":";;;;;;AAGA,SAASA,eAAeA,CAACC,QAAQ,EAAE;EACjC,IAAI;IACF,IAAI,CAACA,QAAQ,EAAE;MACb,OAAO,KAAK;IACd;IACA,IAAIC,MAAM,CAACC,IAAI,CAACF,QAAQ,CAACG,SAAS,CAAC,CAAC,CAAC,CAACC,MAAM,KAAK,CAAC,EAAE;MAClD,OAAO,KAAK;IACd;EACF,CAAC,CAAC,OAAOC,CAAC,EAAE;IACV,OAAO,KAAK;EACd;EACA,OAAO,IAAI;AACb;AAAC,IAE8BC,cAAc,GAA7B,eAAeA,cAAcA,CAACC,OAAO,EAAE;EACrDA,OAAO,CAACC,IAAI,CACV,eAAe,EACf,CAACC,MAAU,EAAEC,KAAK,KAAK;IACrB,MAAM;MACJC,YAAY;MACZC,MAAM;MACNC,OAAO,EAAE;QAAEC;MAAkB,CAAC;MAC9BC;IACF,CAAC,GAAGL,KAAK;IACT,MAAMV,QAAQ,GAAGW,YAAY,CAC3BG,iBAAiB,EACjB;MACEE,IAAI,EAAED,UAAU,CAACE,OAAO,CAAC,UAAU,CAAC;MACpCC,WAAW,EAAER,KAAK,CAACS,eAAe,CAChC,4EAA4E,EAC5E,MACF;IACF,CAAC,EACD;MACEC,QAAQ,EAAG,8CAA6C;MACxDC,cAAc,EAAE;IAClB,CAAC,EACD,IACF,CAAC;IACD,IAAItB,eAAe,CAACC,QAAQ,CAAC,EAAE;MAC7B,OAAOY,MAAM,CACXH,MAAM,EACN;QACEa,QAAQ,EAAEtB;MACZ,CAAC,EACD,gCACF,CAAC;IACH,CAAC,MAAM;MACL,OAAOS,MAAM;IACf;EACF,CAAC,EACD,CAAC,UAAU,CAAC,EACZ,EAAE,EACF,CAAC,OAAO,CACV,CAAC;AACH,CAAC;AAAAc,OAAA,CAAAC,OAAA,GAAAlB,cAAA"}