{"version":3,"file":"extend.js","names":["_chalk","_interopRequireDefault","require","obj","__esModule","default","INDENT","$$hints","Symbol","indent","text","replace","extend","base","extra","hint","hints","keysB","Object","keys","extraHints","key","newValue","hintB","hintA","firstEntityDetails","chalk","magenta","secondEntityDetails","yellow","Error","bold","assign"],"sources":["../src/extend.js"],"sourcesContent":["// @flow\nimport chalk from \"chalk\";\n\nconst INDENT = \"  \";\nconst $$hints = Symbol(\"hints\");\n\nexport function indent(text: string) {\n  return (\n    INDENT + text.replace(/\\n/g, \"\\n\" + INDENT).replace(/\\n +(?=\\n|$)/g, \"\\n\")\n  );\n}\n\nexport default function extend<Obj1: *, Obj2: *>(\n  base: Obj1,\n  extra: Obj2,\n  hint?: string\n): Obj1 & Obj2 {\n  const hints = base[$$hints] || {};\n\n  const keysB = Object.keys(extra);\n  const extraHints = extra[$$hints] || {};\n  for (const key of keysB) {\n    const newValue = extra[key];\n    const hintB = extraHints[key] || hint;\n    if (key in base && base[key] !== newValue) {\n      const hintA: ?string = hints[key];\n      const firstEntityDetails = !hintA\n        ? \"We don't have any information about the first entity.\"\n        : `The first entity was:\\n\\n${indent(chalk.magenta(hintA))}`;\n      const secondEntityDetails = !hintB\n        ? \"We don't have any information about the second entity.\"\n        : `The second entity was:\\n\\n${indent(chalk.yellow(hintB))}`;\n      throw new Error(\n        `A naming conflict has occurred - two entities have tried to define the same key '${chalk.bold(\n          key\n        )}'.\\n\\n${indent(firstEntityDetails)}\\n\\n${indent(secondEntityDetails)}`\n      );\n    }\n    if (hintB) {\n      hints[key] = hintB;\n    }\n  }\n  return Object.assign(base, extra, {\n    // $FlowFixMe: symbols\n    [$$hints]: hints,\n  });\n}\n"],"mappings":";;;;;;;AACA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAA0B,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAE1B,MAAMG,MAAM,GAAG,IAAI;AACnB,MAAMC,OAAO,GAAGC,MAAM,CAAC,OAAO,CAAC;AAExB,SAASC,MAAMA,CAACC,IAAY,EAAE;EACnC,OACEJ,MAAM,GAAGI,IAAI,CAACC,OAAO,CAAC,KAAK,EAAE,IAAI,GAAGL,MAAM,CAAC,CAACK,OAAO,CAAC,eAAe,EAAE,IAAI,CAAC;AAE9E;AAEe,SAASC,MAAMA,CAC5BC,IAAU,EACVC,KAAW,EACXC,IAAa,EACA;EACb,MAAMC,KAAK,GAAGH,IAAI,CAACN,OAAO,CAAC,IAAI,CAAC,CAAC;EAEjC,MAAMU,KAAK,GAAGC,MAAM,CAACC,IAAI,CAACL,KAAK,CAAC;EAChC,MAAMM,UAAU,GAAGN,KAAK,CAACP,OAAO,CAAC,IAAI,CAAC,CAAC;EACvC,KAAK,MAAMc,GAAG,IAAIJ,KAAK,EAAE;IACvB,MAAMK,QAAQ,GAAGR,KAAK,CAACO,GAAG,CAAC;IAC3B,MAAME,KAAK,GAAGH,UAAU,CAACC,GAAG,CAAC,IAAIN,IAAI;IACrC,IAAIM,GAAG,IAAIR,IAAI,IAAIA,IAAI,CAACQ,GAAG,CAAC,KAAKC,QAAQ,EAAE;MACzC,MAAME,KAAc,GAAGR,KAAK,CAACK,GAAG,CAAC;MACjC,MAAMI,kBAAkB,GAAG,CAACD,KAAK,GAC7B,uDAAuD,GACtD,4BAA2Bf,MAAM,CAACiB,cAAK,CAACC,OAAO,CAACH,KAAK,CAAC,CAAE,EAAC;MAC9D,MAAMI,mBAAmB,GAAG,CAACL,KAAK,GAC9B,wDAAwD,GACvD,6BAA4Bd,MAAM,CAACiB,cAAK,CAACG,MAAM,CAACN,KAAK,CAAC,CAAE,EAAC;MAC9D,MAAM,IAAIO,KAAK,CACZ,oFAAmFJ,cAAK,CAACK,IAAI,CAC5FV,GACF,CAAE,SAAQZ,MAAM,CAACgB,kBAAkB,CAAE,OAAMhB,MAAM,CAACmB,mBAAmB,CAAE,EACzE,CAAC;IACH;IACA,IAAIL,KAAK,EAAE;MACTP,KAAK,CAACK,GAAG,CAAC,GAAGE,KAAK;IACpB;EACF;EACA,OAAOL,MAAM,CAACc,MAAM,CAACnB,IAAI,EAAEC,KAAK,EAAE;IAChC;IACA,CAACP,OAAO,GAAGS;EACb,CAAC,CAAC;AACJ"}