{"version":3,"file":"swallowError.js","names":["_debug","_interopRequireDefault","require","obj","__esModule","default","debugWarn","debugFactory","swallowError","e","enabled","console","warn","errorSnippet","toString","String","replace","slice","trim"],"sources":["../src/swallowError.js"],"sourcesContent":["// @flow\nimport debugFactory from \"debug\";\n\nconst debugWarn = debugFactory(\"graphile-build:warn\");\n\nexport default function swallowError(e: Error): void {\n  // BE VERY CAREFUL NOT TO THROW!\n  // XXX: Improve this\n  if (debugWarn.enabled) {\n    // eslint-disable-next-line no-console\n    console.warn(`Recoverable error occurred:`);\n    debugWarn(e);\n  } else {\n    const errorSnippet =\n      e && typeof e.toString === \"function\"\n        ? String(e).replace(/\\n.*/g, \"\").slice(0, 320).trim()\n        : null;\n    if (errorSnippet) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Recoverable error occurred; use envvar 'DEBUG=\"graphile-build:warn\"' for full error (see: https://graphile.org/postgraphile/debugging )\\n> ${errorSnippet}â€¦`\n      );\n    } else {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Recoverable error occurred; use envvar 'DEBUG=\"graphile-build:warn\"' for error (see: https://graphile.org/postgraphile/debugging )`\n      );\n    }\n    debugWarn(e);\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAiC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAEjC,MAAMG,SAAS,GAAG,IAAAC,cAAY,EAAC,qBAAqB,CAAC;AAEtC,SAASC,YAAYA,CAACC,CAAQ,EAAQ;EACnD;EACA;EACA,IAAIH,SAAS,CAACI,OAAO,EAAE;IACrB;IACAC,OAAO,CAACC,IAAI,CAAE,6BAA4B,CAAC;IAC3CN,SAAS,CAACG,CAAC,CAAC;EACd,CAAC,MAAM;IACL,MAAMI,YAAY,GAChBJ,CAAC,IAAI,OAAOA,CAAC,CAACK,QAAQ,KAAK,UAAU,GACjCC,MAAM,CAACN,CAAC,CAAC,CAACO,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAACC,IAAI,CAAC,CAAC,GACnD,IAAI;IACV,IAAIL,YAAY,EAAE;MAChB;MACAF,OAAO,CAACC,IAAI,CACT,8IAA6IC,YAAa,GAC7J,CAAC;IACH,CAAC,MAAM;MACL;MACAF,OAAO,CAACC,IAAI,CACT,oIACH,CAAC;IACH;IACAN,SAAS,CAACG,CAAC,CAAC;EACd;AACF"}