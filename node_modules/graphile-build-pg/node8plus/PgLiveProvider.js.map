{"version":3,"file":"PgLiveProvider.js","names":["_graphileBuild","require","PgLiveProvider","LiveProvider","constructor","args","namespace","collectionIdentifierIsValid","collectionIdentifier","kind","recordIdentifierIsValid","recordIdentifier","Array","isArray","primaryKeyConstraint","length","keyAttributes","exports","default"],"sources":["../src/PgLiveProvider.js"],"sourcesContent":["// @flow\nimport { LiveProvider } from \"graphile-build\";\nimport type { PgClass } from \"./plugins/PgIntrospectionPlugin\";\n\nexport default class PgLiveProvider extends LiveProvider {\n  // eslint-disable-next-line flowtype/no-weak-types\n  constructor(...args: any[]) {\n    super(...args);\n    this.namespace = \"pg\";\n  }\n\n  collectionIdentifierIsValid(collectionIdentifier: PgClass) {\n    return collectionIdentifier && collectionIdentifier.kind === \"class\";\n  }\n\n  recordIdentifierIsValid(\n    collectionIdentifier: PgClass,\n    // eslint-disable-next-line flowtype/no-weak-types\n    recordIdentifier: Array<any>\n  ) {\n    if (!Array.isArray(recordIdentifier)) return false;\n    if (!collectionIdentifier.primaryKeyConstraint) return false;\n    if (\n      recordIdentifier.length !==\n      collectionIdentifier.primaryKeyConstraint.keyAttributes.length\n    ) {\n      return false;\n    }\n    // TODO: more validation would not go amiss\n    return true;\n  }\n}\n"],"mappings":";;;;;;AACA,IAAAA,cAAA,GAAAC,OAAA;AAGe,MAAMC,cAAc,SAASC,2BAAY,CAAC;EACvD;EACAC,WAAWA,CAAC,GAAGC,IAAW,EAAE;IAC1B,KAAK,CAAC,GAAGA,IAAI,CAAC;IACd,IAAI,CAACC,SAAS,GAAG,IAAI;EACvB;EAEAC,2BAA2BA,CAACC,oBAA6B,EAAE;IACzD,OAAOA,oBAAoB,IAAIA,oBAAoB,CAACC,IAAI,KAAK,OAAO;EACtE;EAEAC,uBAAuBA,CACrBF,oBAA6B;EAC7B;EACAG,gBAA4B,EAC5B;IACA,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,gBAAgB,CAAC,EAAE,OAAO,KAAK;IAClD,IAAI,CAACH,oBAAoB,CAACM,oBAAoB,EAAE,OAAO,KAAK;IAC5D,IACEH,gBAAgB,CAACI,MAAM,KACvBP,oBAAoB,CAACM,oBAAoB,CAACE,aAAa,CAACD,MAAM,EAC9D;MACA,OAAO,KAAK;IACd;IACA;IACA,OAAO,IAAI;EACb;AACF;AAACE,OAAA,CAAAC,OAAA,GAAAhB,cAAA"}